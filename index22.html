<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Etiquetas App</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, maximum-scale=1.0">
<style>
body { font-family: Arial, sans-serif; margin:0; background:#f9f9fb; color:#000; padding-bottom:100px; }
header { background: rgba(255,255,255,0.7); backdrop-filter: blur(8px); color:#000; text-align:center; padding:12px; font-size:1.1em; font-weight:bold; position:sticky; top:0; z-index:999; }
.nav-buttons { margin-top:8px; }
.nav-buttons button, .nav-buttons a { text-decoration: none; margin:0 4px; padding:6px 12px; border:none; border-radius:6px; background:#000; color:#fff; cursor:pointer; font-size:0.9em; }
.nav-buttons button:hover, .nav-buttons a:hover { background:#333; }
h1 { text-align:center; color:#000; margin:10px 0 15px; font-size:1.4em; }
label { display:block; margin-top:10px; font-weight:bold; color:#000; font-size:0.9em; }
select, input[type="text"] { width:100%; padding:12px; margin-top:6px; border-radius:6px; border:2px solid #000; font-size:1em; background:#fff; color:#000; box-sizing: border-box; }
#productoLista { display:flex; flex-direction: column; gap:8px; margin-top:10px; }

.producto-btn { display: flex; justify-content: space-between; align-items: center; width: 100%; background:#eee; color:#000; padding:12px; border-radius:6px; text-align:left; font-size:0.9em; cursor:pointer; user-select:none; border:1px solid #ddd; }
.producto-info { font-size: 0.8em; color: #555; background-color: #ddd; padding: 2px 6px; border-radius: 4px; white-space: nowrap; }
.producto-btn.active { background:#000; color:#fff; font-weight:bold; border:1px solid #333; }
.producto-btn.active .producto-info { color: #000; background-color: #ccc; }

/* --- CAMBIOS PARA VISUALIZACI√ìN DE ETIQUETAS --- */
.print-area {
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
  padding: 0 15px; /* Alineado con el resto del contenido */
}
.etiqueta {
  width: 50mm;
  height: 30mm;
  display: flex;
  flex-direction: column;
  justify-content: space-between; /* Espaciado vertical mejorado */
  font-size: 13pt; /* Tama√±o de letra reducido para mejor ajuste */
  line-height: 1.2; /* Altura de l√≠nea para evitar solapamiento */
  padding: 2mm;
  box-sizing: border-box;
  page-break-inside: avoid;
  border: 1px dashed #999; /* Borde para ver los l√≠mites en pantalla */
  background: white;
  overflow: hidden; /* Evita que el texto se salga */
}
.etiqueta div { word-break: break-word; } /* Evita desbordamiento de texto largo */
/* --- FIN DE CAMBIOS --- */

.fab-container { position:fixed; bottom:15px; right:15px; display:flex; flex-direction:column; gap:16px; z-index:999; align-items:center; }
.fab { color:#fff; border:none; border-radius:50%; width:60px; height:60px; font-size:24px; display:flex; align-items:center; justify-content:center; cursor:pointer; box-shadow:0 3px 6px rgba(0,0,0,0.3); }
.fab:active { filter:brightness(85%); }
.fab-generar { background:#000; }
.fab-imprimir { background:#444; }
.fab-excel { background:#007ACC; }
.fab-label { margin-top:4px; font-size:0.8em; color:#000; font-weight:bold; text-align:center; }
.fab-group { display:flex; flex-direction:column; align-items:center; }
.btn-seleccionar-todo { margin-top:10px; padding:6px 12px; border:1px solid #000; border-radius:6px; background:#fff; cursor:pointer; font-size:0.9em; }
.btn-seleccionar-todo:hover { background:#ddd; }
.resultado-producto { border:2px dashed #000; border-radius:12px; padding:10px; margin-bottom:10px; background:#f8f8f8; display:flex; flex-direction:column; gap:4px; font-size:0.9em; }
.obrador-container { padding:15px; }
.obrador-item { border:1px solid #ccc; border-radius:8px; padding:10px; margin-bottom:10px; background-color:#fff; }
.obrador-item h3 { margin-top:0; font-size:1.2em; }
.obrador-item p { margin:5px 0; font-size:0.9em; }
.obrador-item button { background-color:#000; color:#fff; border:none; padding:6px 12px; border-radius:4px; cursor:pointer; font-size:0.8em; margin-top:8px; }
.obrador-item button:hover { background-color:#333; }
.obrador-details { margin-top:10px; padding-top:10px; border-top:1px dashed #ccc; display:none; }
.obrador-details h4 { margin-top:0; }
.quick-filters { display:flex; flex-wrap:wrap; justify-content:space-around; gap:10px; margin-top:15px; }
.quick-filters button { flex:1; min-width:120px; padding:10px; border:1px solid #000; border-radius:6px; background:#fff; cursor:pointer; font-size:0.9em; font-weight:bold; display:flex; align-items:center; justify-content:center; gap:5px; }
.quick-filters button:hover { background:#eee; }

@media print {
  @page{size:50mm 30mm; margin:0;}
  body, html { margin:0; padding:0; }
  body * { visibility:hidden; }
  .print-area, .print-area * { visibility:visible; }
  .print-area { position:absolute; top:0; left:0; width:100%; height:100%; }
  .etiqueta { border:none; font-size:13pt; padding:2mm; display:flex; flex-direction:column; justify-content:space-between; width:50mm; height:30mm;}
}
</style>
</head>
<body>

<header>
  Creado por Ronald ‚Äì Santa Gloria Russafa
  <div class="nav-buttons">
    <button onclick="mostrarVista('etiquetas')">üñ®Ô∏è Generar</button>
    <button onclick="mostrarVista('consultar')">üìÖ Consultar</button>
    <button onclick="mostrarVista('obrador')">üî™ Obrador</button>
    <a href="inventario.html">Inventario</a>
  </div>
</header>

<div id="vista-etiquetas">
<h1>üñ®Ô∏è Generador de Etiquetas</h1>
<div class="form-section" style="padding:0 15px;">
<label for="empleado">üë§ ¬øQui√©n etiqueta?</label>
<select id="empleado"></select>
<label for="categoria">üì¶ Categor√≠a</label>
<select id="categoria" onchange="cargarProductos()"></select>
<button class="btn-seleccionar-todo" onclick="seleccionarTodos()">‚úîÔ∏è Seleccionar todo</button>
<label for="buscador">üîç Buscar producto</label>
<input type="text" id="buscador" placeholder="Escribe para filtrar...">
<label>‚úîÔ∏è Selecciona productos</label>
<div id="productoLista"></div>
</div>

<h2 style="margin:20px 15px 10px;">Etiquetas listas:</h2>
<div class="print-area" id="printArea"></div>

<div class="fab-container">
  <div class="fab-group">
    <button class="fab fab-generar" onclick="generarEtiquetas()" title="Generar etiquetas">üìù</button>
    <div class="fab-label">Generar</div>
  </div>
  <div class="fab-group">
    <button class="fab fab-imprimir" onclick="imprimirSecuencial()" title="Imprimir etiquetas">üñ®Ô∏è</button>
    <div class="fab-label">Imprimir</div>
  </div>
  <div class="fab-group">
    <button class="fab fab-excel" onclick="exportarXLSX()" title="Exportar Excel">üìÅ</button>
    <div class="fab-label">Excel</div>
  </div>
</div>
</div>

<div id="vista-consultar" style="display:none; padding:15px;">
<h1>üìÖ Consulta de Caducidades</h1>
<label for="busquedaProducto">üîç Buscar producto</label>
<input type="text" id="busquedaProducto" placeholder="Escribe un producto...">
<div id="resultadoConsulta" style="margin-top:15px; font-size:1em;"></div>
</div>

<div id="vista-obrador" style="display:none;">
<div class="obrador-container">
<h1>üî™ Obrador</h1>
<label for="buscadorObrador">üîç Buscar producto</label>
<input type="text" id="buscadorObrador" placeholder="Escribe para buscar...">
<div class="quick-filters">
    <button onclick="cargarProductosObradorConFiltro('croissants')">ü•ê Croissants</button>
    <button onclick="cargarProductosObradorConFiltro('ensaladas')">ü•ó Ensaladas</button>
    <button onclick="cargarProductosObradorConFiltro('focaccias')">ü•ñ Focaccias</button>
    <button onclick="cargarProductosObradorConFiltro('glorias')">‚ú® Glorias</button>
    <button onclick="cargarProductosObradorConFiltro('sandwiches')">ü•™ Sandwiches</button>
    <button onclick="cargarProductosObradorConFiltro('bocadillos')">ü•ñ Bocadillos</button>
</div>
<div id="obradorLista" style="margin-top:15px;"></div>
</div>
</div>

<script src="https://cdn.sheetjs.com/xlsx-latest/package/dist/xlsx.full.min.js"></script>
<script src="productos.js"></script>
<script>
// El resto del script se mantiene igual, ya que los cambios de l√≥gica no son necesarios, solo los de datos (productos.js) y visuales (CSS)
// ... (pega aqu√≠ el script de tu archivo original sin cambios)
</script>
</body>
</html>
